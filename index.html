<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HBD Kuku ‚ù§Ô∏è</title>
<style>
  :root{
    --bg1:#1a1a1a;
    --mesh1:#ff5e62;
    --mesh2:#ff9966;
    --mesh3:#6cf1ff;
    --accent:#ff5e62;
    --accent2:#ffd56b;
    --glass: rgba(255,255,255,0.12);
    --glass-border: rgba(255,255,255,0.35);
    --text:#fff;
    --muted:#e8e8e8;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
    color:var(--text); background:var(--bg1); overflow:hidden;
  }

  /* Gradient mesh background */
  .mesh{
    position:fixed; inset:0; z-index:0;
    background:
      radial-gradient(60vmax 60vmax at 10% 20%, rgba(255,94,98,0.35), transparent 60%),
      radial-gradient(50vmax 50vmax at 90% 10%, rgba(108,241,255,0.28), transparent 60%),
      radial-gradient(55vmax 55vmax at 50% 100%, rgba(255,153,102,0.30), transparent 60%),
      linear-gradient(180deg, #0f0f0f, #111 40%, #0d0d0d);
    filter:saturate(120%);
    animation: meshMove 20s ease-in-out infinite alternate;
  }
  @keyframes meshMove{
    0%{filter:hue-rotate(0deg) saturate(110%)}
    100%{filter:hue-rotate(10deg) saturate(130%)}
  }

  /* Canvas layers */
  canvas.bg{position:fixed; inset:0; z-index:1; pointer-events:none}
  canvas.confetti{position:fixed; inset:0; z-index:6; pointer-events:none}

  /* Glass container */
  .glass{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:5; padding:24px;
  }
  .card{
    width:min(900px, 92vw); min-height: min(620px, 86vh);
    background:var(--glass);
    border:1px solid var(--glass-border);
    border-radius:24px;
    backdrop-filter: blur(16px) saturate(120%);
    -webkit-backdrop-filter: blur(16px) saturate(120%);
    box-shadow:
      0 10px 30px rgba(0,0,0,0.35),
      inset 0 0 0 1px rgba(255,255,255,0.08);
    position:relative; overflow:hidden;
  }

  /* Header bar */
  .bar{
    position:absolute; top:0; left:0; right:0; height:58px; display:flex; align-items:center; justify-content:space-between; padding:0 16px 0 14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.02));
    border-bottom: 1px solid rgba(255,255,255,0.25);
  }
  .dot{width:10px;height:10px;border-radius:50%;margin-right:6px}
  .dots{display:flex;align-items:center}
  .title{font-weight:600; letter-spacing:0.3px; color:var(--muted)}
  .actions{display:flex;gap:10px}
  .pill{
    padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,0.25);
    background:rgba(255,255,255,0.08); color:#fff; font-size:14px; cursor:pointer;
    transition: transform .15s ease, background .2s ease;
  }
  .pill:hover{transform:translateY(-1px); background:rgba(255,255,255,0.14)}

  /* Sections */
  .section{position:absolute; inset:58px 0 0 0; display:grid; grid-template-columns: 1.1fr 0.9fr; height:calc(100% - 58px);}
  @media (max-width: 900px){
    .section{grid-template-columns:1fr}
  }

  /* Left: Quiz then slideshow */
  .left{position:relative; overflow:hidden; border-right:1px solid rgba(255,255,255,0.2)}
  @media (max-width: 900px){ .left{border-right:none; border-bottom:1px solid rgba(255,255,255,0.2)} }

  /* Quiz panel */
  .quiz{
    position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:24px; gap:18px;
    background: rgba(0,0,0,0.20);
  }
  .quiz h2{
    margin:0; font-size: clamp(26px, 4vw, 34px);
    background: linear-gradient(90deg, #fff, #ffd56b, #ff9966);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    text-align:center;
  }
  .q{
    font-size: clamp(18px, 2.6vw, 20px); color:#fff; opacity:0.95; text-align:center;
  }
  .btns{display:flex; gap:14px; margin-top:10px; position:relative}
  .yes, .no{
    padding:12px 18px; border-radius:14px; border:1px solid rgba(255,255,255,0.3);
    background: rgba(255,255,255,0.10); color:#fff; font-size:16px; cursor:pointer;
    transition: transform .15s ease, background .2s ease, box-shadow .2s ease;
    box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  }
  .yes:hover{transform:translateY(-1px); background:rgba(255,94,98,0.35); box-shadow:0 10px 24px rgba(255,94,98,0.25)}
  .no{position:relative}
  .no.running{position:absolute}
  .seal{font-size:13px; opacity:0.85}

  .success{
    display:none; flex-direction:column; align-items:center; text-align:center; gap:10px; margin-top:6px;
  }
  .success.show{display:flex}
  .success h3{margin:8px 0 0; font-size:clamp(22px,3.4vw,26px)}
  .success p{margin:0; opacity:0.92}

  /* Slideshow (hidden until quiz success) */
  #slideshow{
    position:absolute; inset:0; opacity:0; pointer-events:none; transition:opacity .7s ease;
  }
  #slideshow.show{opacity:1; pointer-events:auto}
  #slideshow .slide{
    position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; transition:opacity 1s ease;
  }
  #slideshow .slide.active{opacity:1}
  .prev,.next{
    cursor:pointer; position:absolute; top:50%; padding:10px; margin-top:-25px; color:white;
    font-size:36px; background:rgba(0,0,0,0.35); border-radius:8px; user-select:none; z-index:2;
  }
  .prev:hover,.next:hover{background:rgba(0,0,0,0.55)}
  .prev{left:18px} .next{right:18px}

  /* Right: Message + audio */
  .right{position:relative; padding:22px}
  #message{position:absolute; left:22px; right:22px; bottom:22px; color:#fff; font-size: clamp(18px, 2.6vw, 22px); line-height:1.5}
  .typewriter span{
    background:linear-gradient(90deg,#ff5e62,#ff9966,#ffd56b);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  }

  /* Personal note box */
  .note{
    margin-top:16px; padding:16px; border-radius:16px;
    background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.22);
  }

  /* Audio button */
  #audioBtn{
    padding:10px 14px; background:var(--accent); color:white; border:none; cursor:pointer; border-radius:10px; font-size:15px;
  }
  #tapHint{
    margin-left:10px; padding:8px 12px; background:rgba(0,0,0,0.35); color:#fff; border-radius:8px; font-size:12px; display:inline-block;
  }

  /* Hearts */
  .heart{position:absolute;width:20px;height:20px;background:#ff3257;transform:rotate(45deg);opacity:0.85;z-index:4}
  .heart::before,.heart::after{content:"";position:absolute;width:20px;height:20px;background:#ff3257;border-radius:50%}
  .heart::before{top:-10px;left:0} .heart::after{left:10px;top:0}
  @keyframes floatHeart{0%{transform:translate(0,0) rotate(45deg);opacity:.9}50%{opacity:1}100%{transform:translate(0,-600px) rotate(45deg);opacity:0}}

  /* Footer credits */
  .footer{
    position:absolute; bottom:10px; right:14px; font-size:12px; opacity:0.75
  }
</style>
</head>
<body>
<div class="mesh"></div>
<canvas id="bgCanvas" class="bg"></canvas>
<canvas id="confettiCanvas" class="confetti"></canvas>

<div class="glass">
  <div class="card">
    <div class="bar">
      <div class="dots">
        <span class="dot" style="background:#ff5e62"></span>
        <span class="dot" style="background:#ffd56b"></span>
        <span class="dot" style="background:#6cf1ff"></span>
      </div>
      <div class="title">HBD Kuku ‚ù§Ô∏è</div>
      <div class="actions">
        <button class="pill" id="audioBtn" aria-pressed="false">Play music</button>
        <span id="tapHint">Tap play if muted</span>
      </div>
    </div>

    <div class="section">
      <!-- Left: Quiz and Slideshow -->
      <div class="left">
        <div class="quiz" id="quiz">
          <h2>Quick quiz for you ‚ú®</h2>
          <div class="q">Kya tumhe mujhse <span style="color:#ffd56b">pyaar</span> hai? üòâ</div>
          <div class="btns">
            <button class="yes" id="yesBtn">Yes, always! üíñ</button>
            <button class="no" id="noBtn" aria-disabled="true">No</button>
          </div>
          <div class="seal">No select hi nahi hoga‚Ä¶ destiny says only ‚ÄúYes‚Äù üòÑ</div>

          <div class="success" id="successBox">
            <h3>Yay! ü•∞</h3>
            <p>Ab chalo yaadon ki gallery dekhte hain‚Ä¶ confetti time! üéâ</p>
          </div>
        </div>

        <div id="slideshow" aria-label="Slideshow">
          <span class="prev" aria-label="Previous">&#10094;</span>
          <span class="next" aria-label="Next">&#10095;</span>
          <img src="pic1.jpg" class="slide active" alt="Slide 1">
          <img src="pic2.jpg" class="slide" alt="Slide 2">
          <img src="pic3.jpg" class="slide" alt="Slide 3">
          <img src="pic4.jpg" class="slide" alt="Slide 4">
          <img src="pic5.jpg" class="slide" alt="Slide 5">
          <img src="pic6.jpg" class="slide" alt="Slide 6">
        </div>
      </div>

      <!-- Right: Typewriter and Personal Note -->
      <div class="right">
        <div class="note">
          <strong>Personal message:</strong>
          <p id="personalNote">
            Kuku, tumhare saath har lamha special lagta hai. Aaj ke din tum muskurao, khul ke haso, aur hamesha jaanti raho: you are my favorite person. Happy Birthday! üí´
          </p>
        </div>
        <div id="message" class="typewriter"></div>

        <!-- Audio element -->
        <audio id="myAudio" preload="auto" loop>
          <source src="aud.mp3" type="audio/mpeg">
        </audio>
      </div>
    </div>

    <div class="footer">Made with love</div>
  </div>
</div>

<script>
/* ------ ‚ÄúOnly Yes‚Äù Quiz ------ */
(function(){
  const quiz = document.getElementById('quiz');
  const yes = document.getElementById('yesBtn');
  const no = document.getElementById('noBtn');
  const success = document.getElementById('successBox');
  const slideshow = document.getElementById('slideshow');

  // Make "No" dodge the cursor
  let dodge = 0;
  function moveNo(e){
    no.classList.add('running');
    const rect = quiz.getBoundingClientRect();
    const nx = Math.random()*(rect.width-90);
    const ny = Math.random()*(rect.height-50);
    no.style.left = nx+'px';
    no.style.top = ny+'px';
    dodge++;
    if(dodge>4){ no.textContent = 'Arey yaar‚Ä¶ Yes bolo üòú'; }
  }
  no.addEventListener('pointerover', moveNo);
  no.addEventListener('pointerdown', moveNo);
  no.addEventListener('click', e => e.preventDefault());

  // On Yes: show success, play confetti, reveal slideshow
  yes.addEventListener('click', ()=>{
    success.classList.add('show');
    quiz.style.animation = 'fadeOut .6s ease forwards';
    setTimeout(()=>{
      quiz.style.display='none';
      slideshow.classList.add('show');
      shootConfettiBurst();
    }, 650);
  });

  const style = document.createElement('style');
  style.textContent = '@keyframes fadeOut{to{opacity:0; transform:scale(0.98)}}';
  document.head.appendChild(style);
})();

/* ------ Slideshow ------ */
(function(){
  const slides = Array.from(document.querySelectorAll('#slideshow .slide'));
  const prevBtn = document.querySelector('#slideshow .prev');
  const nextBtn = document.querySelector('#slideshow .next');
  let idx = 0, timer=null, AUTO=4200;

  function show(i){
    slides[idx].classList.remove('active');
    idx = (i + slides.length) % slides.length;
    slides[idx].classList.add('active');
  }
  function next(){ show(idx+1); pauseAuto(); }
  function prev(){ show(idx-1); pauseAuto(); }
  function startAuto(){ stopAuto(); timer = setInterval(()=>show(idx+1), AUTO); }
  function stopAuto(){ if(timer){ clearInterval(timer); timer=null; } }
  function pauseAuto(){ stopAuto(); setTimeout(startAuto, 6000); }

  prevBtn.addEventListener('click', prev);
  nextBtn.addEventListener('click', next);
  window.addEventListener('keydown', e=>{
    if(e.key==='ArrowRight') next();
    if(e.key==='ArrowLeft') prev();
  });

  // Start only after quiz completes (when slideshow gets class 'show')
  const obs = new MutationObserver(() => {
    if (document.getElementById('slideshow').classList.contains('show')){
      startAuto(); obs.disconnect();
    }
  });
  obs.observe(document.getElementById('slideshow'), {attributes:true});
})();

/* ------ Typewriter ------ */
(function(){
  const el = document.getElementById('message');
  const lines = [
    "Happy Birthday, Kuku! ‚ù§Ô∏è",
    "Tumhari muskaan meri sabse pyaari cheez hai.",
    "Aaj, kal, hamesha‚Äîlots of love and surprises.",
    "Chalo, hamari yaadon ki kahani dekhte hain."
  ];
  const colored = s => `<span>${s}</span>`;
  const seq = lines.map(colored);
  const speed = 35, hold = 1500;
  let iLine=0, iChar=0;

  function typeLine(){
    if(iLine>=seq.length) return;
    const html = seq[iLine];
    const textOnly = html.replace(/<[^>]+>/g,'');
    const visible = textOnly.slice(0, iChar);
    el.innerHTML = `<span>${visible}</span>`;
    if(iChar < textOnly.length){ iChar++; setTimeout(typeLine, speed); }
    else { iLine++; iChar=0; setTimeout(typeLine, hold); }
  }
  typeLine();
})();

/* ------ Background canvas (soft particles) ------ */
(function(){
  const canvas = document.getElementById('bgCanvas');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;
  addEventListener('resize', ()=>{ w = canvas.width = innerWidth; h = canvas.height = innerHeight; });

  const colors = ['#ff5e62','#ff9966','#ffd56b','#6cf1ff','#d06bff'];
  const dots = Array.from({length: 120}, ()=> ({
    x: Math.random()*w, y: Math.random()*h,
    r: 0.8 + Math.random()*1.8,
    vx: -0.35 + Math.random()*0.7,
    vy: -0.35 + Math.random()*0.7,
    c: colors[Math.floor(Math.random()*colors.length)],
    a: 0.12 + Math.random()*0.22
  }));

  function tick(){
    ctx.clearRect(0,0,w,h);
    for(const d of dots){
      d.x += d.vx; d.y += d.vy;
      if(d.x<0) d.x=w; else if(d.x>w) d.x=0;
      if(d.y<0) d.y=h; else if(d.y>h) d.y=0;
      ctx.beginPath(); ctx.arc(d.x,d.y,d.r,0,Math.PI*2);
      ctx.fillStyle = d.c; ctx.globalAlpha = d.a; ctx.fill();
    }
    ctx.globalAlpha = 1;
    requestAnimationFrame(tick);
  }
  tick();
})();

/* ------ Confetti (vanilla) ------ */
const confettiCanvas = document.getElementById('confettiCanvas');
const cctx = confettiCanvas.getContext('2d');
function resizeConfetti(){ confettiCanvas.width = innerWidth; confettiCanvas.height = innerHeight; }
addEventListener('resize', resizeConfetti); resizeConfetti();

let confettiPieces = [];
function makePiece(){
  const colors = ['#ff5e62','#ffd56b','#6cf1ff','#d06bff','#ffffff'];
  return {
    x: Math.random()*confettiCanvas.width,
    y: -20,
    w: 6 + Math.random()*8,
    h: 10 + Math.random()*14,
    r: Math.random()*Math.PI,
    vy: 2 + Math.random()*3.5,
    vx: -2 + Math.random()*4,
    color: colors[Math|0](Math.random()*colors.length) // placeholder, fixed below
  };
}
// fix color pick
function randColor(){
  const arr = ['#ff5e62','#ffd56b','#6cf1ff','#d06bff','#ffffff'];
  return arr[Math.floor(Math.random()*arr.length)];
}

function stepConfetti(){
  cctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  for(const p of confettiPieces){
    p.y += p.vy; p.x += p.vx; p.r += 0.05;
    if(p.y > confettiCanvas.height + 40) p.y = -20;
    if(p.x < -20) p.x = confettiCanvas.width + 20;
    if(p.x > confettiCanvas.width + 20) p.x = -20;
    cctx.save();
    cctx.translate(p.x, p.y);
    cctx.rotate(p.r);
    cctx.fillStyle = randColor();
    cctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
    cctx.restore();
  }
  requestAnimationFrame(stepConfetti);
}

function shootConfettiBurst(){
  const n = 120;
  for(let i=0;i<n;i++){
    confettiPieces.push({
      x: confettiCanvas.width/2 + (Math.random()*200-100),
      y: confettiCanvas.height/2 + (Math.random()*60-30),
      w: 6 + Math.random()*10,
      h: 8 + Math.random()*12,
      r: Math.random()*Math.PI,
      vy: 2 + Math.random()*4,
      vx: -4 + Math.random()*8
    });
  }
  if(confettiPieces.length===n) stepConfetti();
}

/* ------ Floating Hearts ------ */
(function(){
  function spawnHeart(){
    const h = document.createElement('div');
    h.className = 'heart';
    const size = 12 + Math.random()*18;
    h.style.width = size+'px';
    h.style.height = size+'px';
    h.style.left = (Math.random()*100)+'vw';
    h.style.bottom = '-30px';
    h.style.animation = `floatHeart ${4 + Math.random()*4}s linear forwards`;
    document.body.appendChild(h);
    setTimeout(()=> h.remove(), 9000);
  }
  setInterval(spawnHeart, 700);
})();

/* ------ Audio Control (policy-safe) ------ */
(function(){
  const audio = document.getElementById('myAudio');
  const btn = document.getElementById('audioBtn');
  const hint = document.getElementById('tapHint');

  function setBtn(playing){
    btn.textContent = playing ? 'Pause music' : 'Play music';
    btn.setAttribute('aria-pressed', playing ? 'true' : 'false');
    hint.style.display = playing ? 'none' : 'inline-block';
  }

  btn.addEventListener('click', async ()=>{
    try{
      if (audio.paused){ await audio.play(); setBtn(true); }
      else { audio.pause(); setBtn(false); }
    }catch(e){ setBtn(false); }
  });

  const prime = async ()=>{
    try{ await audio.play(); setBtn(true); }catch(e){}
    removeEventListener('pointerdown', prime);
    removeEventListener('keydown', prime);
  };
  addEventListener('pointerdown', prime, {once:true});
  addEventListener('keydown', prime, {once:true});
})();
</script>
</body>
</html>
